% Vital Signs Chirp Profile Configuration
% IWR6843AOPEVM - Optimized for vital signs detection at ~2m range
%
% Target specifications:
% - Maximum range: 3m
% - Range resolution: ~5cm (0.0488m)
% - Frame rate: 10 Hz
% - Subject distance: 1-2m
%
% Usage:
%   Send this configuration to the device via CLI:
%   ./scripts/send_cfg.sh configs/chirp_profiles/vital_signs_2m.cfg
%

% Sensor stop (ensure clean state)
sensorStop

% Flush configuration
flushCfg

% Data path configuration
% Format: dfeDataOutputMode <modeType>
% modeType: 1 = frame based chirps
dfeDataOutputMode 1

% Channel configuration
% Format: channelCfg <rxChannelEn> <txChannelEn> <cascading>
% rxChannelEn: 0xF = all 4 RX channels enabled
% txChannelEn: 0x7 = all 3 TX channels enabled (for AOP)
% cascading: 0 = no cascading
channelCfg 15 7 0

% ADC configuration
% Format: adcCfg <numADCBits> <adcOutputFmt>
% numADCBits: 2 = 16-bit
% adcOutputFmt: 1 = complex
adcCfg 2 1

% ADC buffer configuration
% Format: adcbufCfg <subFrameIdx> <adcOutputFmt> <SampleSwap> <ChanInterleave> <ChirpThreshold>
adcbufCfg -1 0 1 1 1

% Profile configuration for vital signs
% Format: profileCfg <profileId> <startFreq> <idleTime> <adcStartTime> <rampEndTime>
%                    <txOutPower> <txPhaseShifter> <freqSlopeConst> <txStartTime>
%                    <numAdcSamples> <digOutSampleRate> <hpfCornerFreq1> <hpfCornerFreq2>
%                    <rxGain>
%
% Using validated profile parameters from TI demo:
% - Start frequency: 60 GHz
% - Slope: 166 MHz/us, ramp 24us -> 3.98 GHz BW -> ~4cm resolution
% - ADC: 256 samples at 12.5 Msps = 20.48us collection
% - Idle time: 7us between chirps
%
profileCfg 0 60 7 3 24 0 0 166 1 256 12500 0 0 158

% Chirp configuration
% Format: chirpCfg <startIdx> <endIdx> <profileId> <startFreqVar> <freqSlopeVar>
%                  <idleTimeVar> <adcStartTimeVar> <txEnable>
% TX configuration for TDM-MIMO (each TX in sequence)
chirpCfg 0 0 0 0 0 0 0 1
chirpCfg 1 1 0 0 0 0 0 2
chirpCfg 2 2 0 0 0 0 0 4

% Frame configuration
% Format: frameCfg <chirpStartIdx> <chirpEndIdx> <numLoops> <numFrames> <framePeriodicity> <triggerSelect> <frameTriggerDelay>
%
% For vital signs:
% - 128 chirps per frame (numLoops * (chirpEndIdx - chirpStartIdx + 1))
% - Frame period: 100ms (10 Hz frame rate)
% - Continuous operation: numFrames = 0
%
frameCfg 0 2 43 0 100 1 0

% Low power mode (disabled for continuous vital signs)
lowPower 0 0

% GUI Monitor selection
% Format: guiMonitor <subFrameIdx> <detectedObjects> <logMagRange> <noiseProfile>
%                    <rangeAzimuthHeatMap> <rangeDopplerHeatMap> <statsInfo>
% Enable detected objects and stats for debugging
guiMonitor -1 1 0 0 0 0 1

% CFAR configuration for range
% Format: cfarCfg <subFrameIdx> <procDirection> <mode> <noiseWin> <guardLen>
%                 <divShift> <cyclicMode> <thresholdScale> <peakGrouping>
cfarCfg -1 0 2 8 4 3 0 15 0

% CFAR configuration for Doppler
cfarCfg -1 1 2 4 2 3 1 15 0

% Multi-object beam forming
% Format: multiObjBeamForming <subFrameIdx> <enabled> <threshold>
multiObjBeamForming -1 1 0.5

% DC range signature calibration
% Format: calibDcRangeSig <subFrameIdx> <enabled> <negativeBinIdx> <positiveBinIdx> <numAvgChirps>
calibDcRangeSig -1 0 -5 8 256

% Clutter removal
clutterRemoval -1 0

% Antenna geometry compensation
% Format: compRangeBiasAndRxChanPhase <rangeBias> <Re00> <Im00> ... <Re11> <Im11>
compRangeBiasAndRxChanPhase 0.0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0

% Measure range bias and RX channel phase (calibration - disabled)
% Format: measureRangeBiasAndRxChanPhase <enabled> <targetDistance> <searchWin>
measureRangeBiasAndRxChanPhase 0 1.0 0.2

% AoA FOV configuration
% Format: aoaFovCfg <subFrameIdx> <minAzimuthDeg> <maxAzimuthDeg> <minElevationDeg> <maxElevationDeg>
aoaFovCfg -1 -90 90 -90 90

% CFAR FOV configuration
% Range FOV: 0.3m to 3m
cfarFovCfg -1 0 0.3 3.0
% Doppler FOV: -1 to 1 m/s (minimal motion for vital signs)
cfarFovCfg -1 1 -20.16 20.16

% Extended max velocity (disabled for VS)
extendedMaxVelocity -1 0

% BPM (Binary Phase Modulation) configuration - disabled
% Format: bpmCfg <subFrameIdx> <enabled> <chirp0Idx> <chirp1Idx>
bpmCfg -1 0 0 0

% LVDS stream configuration - disabled for UART output
% Format: lvdsStreamCfg <subFrameIdx> <enableHeader> <dataFmt> <enableSW>
lvdsStreamCfg -1 0 0 0

% Analog monitor configuration
% Format: analogMonitor <rxSaturation> <sigImgBand>
analogMonitor 0 0

% Chirp Quality monitoring - RX saturation
% Format: CQRxSatMonitor <profile> <satMonSel> <priSliceDuration> <numSlices> <rxChanMask>
CQRxSatMonitor 0 3 4 63 0

% Chirp Quality monitoring - Signal/Image band
% Format: CQSigImgMonitor <profile> <numSlices> <numSamplePerSlice>
CQSigImgMonitor 0 127 4

% Calibration data configuration
% Format: calibData <save> <restore> <flashOffset>
calibData 0 0 0

% ============================================================================
% VITAL SIGNS CONFIGURATION
% ============================================================================

% Enable vital signs processing
% Format: vitalsign <enable> <trackerIntegration>
%   enable: 1 = on
%   trackerIntegration: 0 = use fixed range bin
vitalsign 1 0

% Configure range bin for vital signs
% Format: VSRangeIdxCfg <startBin> <numBins>
% For ~1.5m range with 0.0488m resolution: bin 30-31
VSRangeIdxCfg 30 5

% Target ID configuration (for tracker integration)
% Format: VSTargetId <targetId>
% 255 = nearest target
VSTargetId 255

% ============================================================================
% START SENSOR
% ============================================================================
sensorStart
